const display = document.getElementById("display");
const buttons = document.querySelectorAll("button");
const shiftBtn = document.getElementById("shift");
let shiftMode = false;

// Toggle SHIFT mode
shiftBtn.addEventListener("click", () => {
  shiftMode = !shiftMode;
  shiftBtn.classList.toggle("active");

  // Update button labels when SHIFT is active
  document.querySelectorAll(".func").forEach(btn => {
    if (shiftMode) {
      btn.textContent = btn.dataset.shift.replace("(", "⁻¹");
    } else {
      btn.textContent = btn.dataset.normal.replace("(", "").replace(">", "");
    }
  });
});

buttons.forEach(btn => {
  btn.addEventListener("click", () => {
    let value = btn.textContent;

    if (value === "C") {
      display.textContent = "";
    } else if (value === "DEL") {
      display.textContent = display.textContent.slice(0, -1);
    } else if (value === "=") {
      try {
        let expression = display.textContent
          .replace(/÷/g, "/")
          .replace(/×/g, "*")
          .replace(/π/g, "Math.PI")
          .replace(/sin\(/g, "Math.sin(")
          .replace(/cos\(/g, "Math.cos(")
          .replace(/tan\(/g, "Math.tan(")
          .replace(/asin\(/g, "Math.asin(")
          .replace(/acos\(/g, "Math.acos(")
          .replace(/atan\(/g, "Math.atan(");

        display.textContent = eval(expression);
      } catch {
        display.textContent = "Error";
      }
    } else if (btn.classList.contains("func")) {
      display.textContent += shiftMode ? btn.dataset.shift : btn.dataset.normal;
    } else if (value !== "SHIFT") {
      display.textContent += value;
    }
  });
});
